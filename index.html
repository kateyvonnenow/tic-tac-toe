<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe</title>
    <link rel="stylesheet" href="style.css">
    <link rel="" href="index.js">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@100&family=Playfair+Display:ital@0;1&family=Raleway:wght@100&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Silkscreen&display=swap" rel="stylesheet">
</head>
<body>
    <main class="main background">
        <section class="title">
            <h1>TIC TAC TOE</h1>
        </section>
        <div class="menu">
            <form action="">
                <section class="player1_menu players_menu" >
                    <input class="player1_name names" type="text" placeholder="P1 Name">
                    <button class="player1_ok ready_button">Ready</button>
                </section>
                <h3 class="vs" >vs</h3>
                <section class="player2_menu players_menu" >
                    <input class="player2_name names" type="text" placeholder="P2 Name">
                    <button class="player2_ok ready_button">Ready</button>
                </section>
            </form>
        </div>
        <section class="display">
            <h2 class="display_player">Player 1 Begin.</h2>
        </section>
        <section class="container" >
            <div class="tile RA C1 D1"></div>
            <div class="tile RA C2"></div>
            <div class="tile RA C3 D2"></div>
            <div class="tile RB C1"></div>
            <div class="tile RB C2 D1 D2"></div>
            <div class="tile RB C3"></div>
            <div class="tile RC C1 D2"></div>
            <div class="tile RC C2"></div>
            <div class="tile RC C3 D1"></div>
        </section>
        <section class="win_count">
            <h4 class="player1_win_count">Player 1 wins:</h4>
            <h4 class="player2_win_count">Player 2 wins:</h4>
        </section>
        <section class="options">
            <button class="replay hidden">replay</button>
        </section>
    </main>
    <script>
        // Players
        var Player1 = "X"
        var Player2 = "O"
        var Player1Turn = true
        var winner = null

        var Player1NameInput = document.querySelector('.player1_name')
        var Player2NameInput = document.querySelector('.player2_name')

        // Playing field Components
        var playingField = document.querySelector(".container")
        var rowA = document.querySelectorAll('.RA')
        var rowB = document.querySelectorAll('.RB')
        var rowC = document.querySelectorAll('.RC')
        var column1 = document.querySelectorAll('.C1')
        var column2 = document.querySelectorAll('.C2')
        var column3 = document.querySelectorAll('.C3')
        var diagonal1 = document.querySelectorAll('.D1')
        var diagonal2 = document.querySelectorAll('.D2')
        var everyTile = document.querySelectorAll('.tile')

        // Buttons
        var title = document.querySelector('h1')
        var player1Ready = document.querySelector('.player1_ok')
        var player2Ready = document.querySelector('.player2_ok')
        var replayButton = document.querySelector('.replay')

        // Game Status
        var Player1WinCount = 0
        var Player2WinCount = 0
        var gameStatus = true

        // Name Choosing
        

        // Player switch turns
        playingField.addEventListener('click', function playGame(event) {
            if (winner === null) {
                var selection = event.target
                if (selection.textContent !== Player1 && selection.textContent !== Player2) {
                    if (Player1Turn === true) {
                        selection.textContent = Player1
                        document.querySelector('.display_player').textContent = "Player 2's turn"
                        Player1Turn = false
                    } else {
                        selection.textContent = Player2
                        document.querySelector('.display_player').textContent = "Player 1's turn"
                        Player1Turn = true
                    }   
                }   
            }
            function winningScenario(playerX) {
                if (rowA[0].textContent === playerX && rowA[1].textContent === playerX && rowA[2].textContent === playerX) { 
                    rowA[0].classList.add('tileWinner')
                    rowA[1].classList.add('tileWinner')
                    rowA[2].classList.add('tileWinner')
                    console.log(playerX + " wins!")
                    return winner = playerX
                } else if (rowB[0].textContent === playerX && rowB[1].textContent === playerX && rowB[2].textContent === playerX) { 
                    rowB[0].classList.add('tileWinner')
                    rowB[1].classList.add('tileWinner')
                    rowB[2].classList.add('tileWinner')
                    console.log(playerX + " wins!")
                    return winner = playerX
                } else if (rowC[0].textContent === playerX && rowC[1].textContent === playerX && rowC[2].textContent === playerX) { 
                    rowC[0].classList.add('tileWinner')
                    rowC[1].classList.add('tileWinner')
                    rowC[2].classList.add('tileWinner')
                    console.log(playerX + " wins!")
                    return winner = playerX
                } else if (column1[0].textContent === playerX && column1[1].textContent === playerX && column1[2].textContent === playerX) {
                    column1[0].classList.add('tileWinner')
                    column1[1].classList.add('tileWinner')
                    column1[2].classList.add('tileWinner') 
                    console.log(playerX + " wins!")
                    return winner = playerX
                } else if (column2[0].textContent === playerX && column2[1].textContent === playerX && column2[2].textContent === playerX) { 
                    column2[0].classList.add('tileWinner')
                    column2[1].classList.add('tileWinner')
                    column2[2].classList.add('tileWinner')
                    console.log(playerX + " wins!")
                    return winner = playerX
                } else if (column3[0].textContent === playerX && column3[1].textContent === playerX && column3[2].textContent === playerX) { 
                    column3[0].classList.add('tileWinner')
                    column3[1].classList.add('tileWinner')
                    column3[2].classList.add('tileWinner')
                    console.log(playerX + " wins!")
                    return winner = playerX
                } else if (diagonal1[0].textContent === playerX && diagonal1[1].textContent === playerX && diagonal1[2].textContent === playerX) { 
                    diagonal1[0].classList.add('tileWinner')
                    diagonal1[1].classList.add('tileWinner')
                    diagonal1[2].classList.add('tileWinner')
                    console.log(playerX + " wins!")
                    return winner = playerX
                } else if (diagonal2[0].textContent === playerX && diagonal2[1].textContent === playerX && diagonal2[2].textContent === playerX) { 
                    diagonal2[0].classList.add('tileWinner')
                    diagonal2[1].classList.add('tileWinner')
                    diagonal2[2].classList.add('tileWinner')
                    console.log(playerX + " wins!")
                    return winner = playerX
                } 
            }
            
            winningScenario(Player1)
            winningScenario(Player2)
            
            if (winner === Player1 && gameStatus === true) {
                Player1WinCount = Player1WinCount + 1
                document.querySelector('.display_player').textContent = "Player 1 wins!"
                document.querySelector('.replay').classList.toggle('hidden')
                document.querySelector('.player1_win_count').textContent = "Player 1 wins: " + Player1WinCount
                gameStatus = false

            } else if (winner === Player2 && gameStatus === true) {
                Player2WinCount = Player2WinCount + 1
                document.querySelector('.display_player').textContent = "Player 2 wins!"
                document.querySelector('.replay').classList.toggle('hidden')
                document.querySelector('.player2_win_count').textContent = "Player 2 wins: " + Player2WinCount
                gamestatus = false

            } else if (rowA[0].textContent !== '' && rowA[1].textContent !== '' && rowA[2].textContent !== '' && rowB[0].textContent !== '' && rowB[1].textContent !== '' && rowB[2].textContent !== '' && rowC[0].textContent !== '' && rowC[1].textContent !== '' && rowC[2].textContent !== '') {
                console.log("It's a draw!")
                document.querySelector('.display_player').textContent = "It's a draw!"
                document.querySelector('.replay').classList.toggle('hidden')
                gamestatus = false
            }
        })

        title.addEventListener('click', function changeBackground(event) {
            if (document.querySelector('.main').className.includes('background2') === true) {
                document.querySelector('.main').classList.remove('background2')
                document.querySelector('.main').classList.add('background3')
            } else if (document.querySelector('.main').className.includes('background3') === true) {
                document.querySelector('.main').classList.remove('background3')
                document.querySelector('.main').classList.add('background4')
            } else if (document.querySelector('.main').className.includes('background4') === true) {
                document.querySelector('.main').classList.remove('background4')
                document.querySelector('.main').classList.add('background')
            } else {
                document.querySelector('.main').classList.remove('background')
                document.querySelector('.main').classList.add('background2')
            }
        })

        replayButton.addEventListener('click', function(event) {
            for (let i = 0; i < everyTile.length; i++) {
                everyTile[i].textContent = ''
                if (everyTile[i].className.includes('tileWinner') === true) {
                    everyTile[i].classList.remove('tileWinner')
                } 
            }
            document.querySelector('.display_player').textContent = "Player 1 Begin."
            document.querySelector('.replay').classList.toggle('hidden')
            Player1Turn = true
            winner = null
            return gameStatus = true
        })
        

    </script>
</body>
</html>